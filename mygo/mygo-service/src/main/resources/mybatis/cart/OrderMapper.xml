<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cza.mapper.cart.CartMapper">
	<resultMap id="cart" type="com.cza.dto.cart.TCart">
		<result property="cartId" column="cart_id"/>
		<result property="sid" column="sid"/>
		<result property="number" column="number"/>
		<result property="uid" column="uid"/>
	</resultMap>
	
	<sql id="allColumns">
			cart_id,uid,sid,number
	</sql>
	
	<select id="listCart" parameterType="com.cza.dto.cart.TCart" resultMap="cart">
		select 
		<include refid="allColumns"></include>
		from t_cart 
			<where>
				<if test="uid!=null">
					and uid =#{uid}
				</if>
				<if test="sid!=null">
					and sid = #{sid}
				</if>
				<if test="cartId!=null">
					and cart_id=#{cartId}
				</if>
			</where>
			order by cart_id desc
	</select>
	<insert id="saveCart" parameterType="com.cza.dto.cart.TCart">
			insert into t_cart (
				cart_id,uid,sid,number
			)
			values (
				#{cartId},#{uid},#{sid},#{number}
			)
	</insert>	
	
	
	<select id="queryCart" parameterType="java.lang.Long" resultMap="cart">
		select 
			<include refid="allColumns"></include>
		from t_cart 
			where cart_id = #{cartId} 
	</select>
	
	<update id="updateCart" parameterType="com.cza.dto.cart.TCart">
		update t_cart
		<set>
				<if test="number!=null">
					number=#{number},
				</if>
		</set>
		where cart_id = #{cartId} 
	</update>
	
	
		
</mapper>